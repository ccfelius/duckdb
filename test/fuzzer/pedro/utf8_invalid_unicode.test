# name: test/fuzzer/pedro/utf8_invalid_unicode.test
# group: [pedro]

# invalid utf8, unicode value too high
statement error
SELECT upper(decode('\xF6\x96\xB0\x85'::BLOB)::VARCHAR);

# invalid utf8, unicode value too high
statement error
SELECT decode('\xF6\x96\xB0\x85'::BLOB)::VARCHAR ILIKE '1';

query I
SELECT upper(decode('\xF0\x9F\x98\x84'::BLOB)::VARCHAR);
----
ðŸ˜„

# invalid utf8, invalid first byte
statement error
SELECT upper(decode('\xE0\x9F\x98\x84'::BLOB)::VARCHAR);

# invalid utf8, invalid continuation byte
statement error
SELECT upper(decode('\xF0\xDF\x98\x84'::BLOB)::VARCHAR);

# NULL character not supported
statement error
SELECT upper(decode('\xF0\x9F\x98\x84\x00'::BLOB)::VARCHAR);

# invalid utf8, UTF-16 surrogate character
statement error
SELECT upper(decode('\xED\xA0\xBD'::BLOB)::VARCHAR);

# invalid utf8, UTF-16 surrogate character
statement error
SELECT upper(decode('\xED\xB8\x8D'::BLOB)::VARCHAR);
