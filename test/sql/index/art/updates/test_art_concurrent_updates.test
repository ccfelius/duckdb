# name: test/sql/index/art/updates/test_art_concurrent_updates.test
# description: Test UPDATE in the main connection with concurrent updates in other connections.
# group: [updates]

# TODO
mode skip

#statement ok
#PRAGMA enable_verification

statement ok
CREATE TABLE tbl (id INT PRIMARY KEY, payload VARCHAR);

statement ok
INSERT INTO tbl VALUES (1, 'first payload');

statement ok con1
BEGIN TRANSACTION;

statement ok con1
UPDATE tbl SET payload = 'con1 payload' WHERE id = 1;

statement ok
BEGIN TRANSACTION

statement ok
UPDATE tbl SET payload = 'second payload' WHERE id = 1;

statement ok
COMMIT;

statement ok con2
BEGIN TRANSACTION;

statement ok con2
UPDATE tbl SET payload = 'con2 payload' WHERE id = 1;

statement ok
BEGIN TRANSACTION;

statement ok
UPDATE tbl SET payload = 'third payload' WHERE id = 1;

statement ok
COMMIT;

statement error con1
COMMIT;
----
asdf

statement error con2
COMMIT
----
asdf