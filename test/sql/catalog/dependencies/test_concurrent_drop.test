# name: test/sql/catalog/dependencies/test_concurrent_drop.test
# description: Test concurrent alter and rename of tables
# group: [dependencies]

require skip_reload

# Create a sequence object
statement ok
create sequence seq;

concurrentloop i 0 100

# Create dependencies on the sequence
statement ok
create table tbl${i} (a integer default nextval('seq'));

#statement error
#drop sequence seq;
#----
#Cannot drop entry "seq" because there are entries that depend on it

statement ok
insert into tbl${i} VALUES(DEFAULT);

statement ok
drop table tbl${i};

endloop

statement ok
drop sequence seq;
