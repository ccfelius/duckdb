# name: test/sql/catalog/function/test_macro.test
# description: Test Macro Simple
# group: [function]

statement ok
PRAGMA enable_verification

statement ok
CREATE MACRO one() AS (SELECT 1);

query T
SELECT one()
----
1

# b cannot be found
statement error
CREATE MACRO add(a) AS a+b

# cannot create function with existing name
statement error
CREATE MACRO string_split(a,b) AS a+b

statement ok
CREATE MACRO IFELSE(a,b,c) AS CASE WHEN a THEN b ELSE c END

# no duplicate names
statement error
CREATE MACRO IFELSE(a,b) AS a+b

# arguments with side effects are not supported
statement error
SELECT IFELSE(RANDOM(), 'true', 'false')

query T
SELECT IFELSE(1,'true','false')
----
true

query T
SELECT IFELSE(0,'true','false')
----
false

