# name: test/sql/catalog/sequence/sequence_currvalue.test
# group: [sequence]

load __TEST_DIR__/sequence_currvalue.db

statement ok
create sequence seq;

statement ok
create table tbl (i integer default nextval('seq'))

statement error
select currval('seq')
----
Sequence Error: currval: sequence is not yet defined in this session

statement ok
insert into tbl values(default);

query I
select currval('seq')
----
1

restart

# We can't replicate this behavior yet
mode skip

statement error
select currval('seq')
----
Sequence Error: currval: sequence is not yet defined in this session
