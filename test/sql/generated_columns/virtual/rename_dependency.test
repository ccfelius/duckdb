# name: test/sql/generated_columns/virtual/rename_dependency.test
# description: Test renaming dependencies of generated columns
# group: [virtual]

statement ok
CREATE TABLE unit (price INTEGER, amount_sold INTEGER);

statement ok
INSERT INTO unit VALUES (5,4)

statement ok
ALTER TABLE unit ADD COLUMN total_profit INTEGER GENERATED ALWAYS AS(price * amount_sold) VIRTUAL;

statement ok
ALTER TABLE unit ADD COLUMN profit_total AS (total_profit);

query I
SELECT total_profit FROM unit
----
20

statement ok
ALTER TABLE unit RENAME COLUMN price TO value

#statement ok
#ALTER TABLE unit DROP COLUMN value;

#query I
#SELECT * FROM unit
#----
#20
