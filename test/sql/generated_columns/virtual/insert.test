# name: test/sql/generated_columns/virtual/insert.test
# description: Test that all types of inserting work
# group: [virtual]

statement ok
CREATE TABLE test (
    foo INTEGER,
    bar INTEGER GENERATED ALWAYS AS (foo+1) VIRTUAL,
    foobar INTEGER DEFAULT 5
);

#Inserting into a generated column by name
statement error
INSERT INTO test (bar) VALUES (5)

#Using column names
statement ok
INSERT INTO test (foo, foobar) VALUES (1, 10);

#Relying on DEFAULT constraint
statement ok
INSERT INTO test (foo) VALUES (12)

query III
SELECT * FROM test
----
1	2	10
12	13	5

#Using VALUES with not enough values - cant rely on DEFAULT here
statement error
INSERT INTO test VALUES (22)

#Using VALUES correctly
statement ok
INSERT INTO test VALUES (22, 10);

#Using VALUES incorrectly, too many values
statement error
INSERT INTO test VALUES (22, 10, 10)
