# name: test/sql/copy/csv/code_cov/csv_state_machine_invalid_utf.test
# description: Tests related to invalid UTF-8 detection
# group: [code_cov]

statement ok
PRAGMA enable_verification

# Error during sniffing
statement error
select * from read_csv_auto('test/sql/copy/csv/data/test/invalid_utf.csv')
----
Invalid unicode (byte sequence mismatch) detected


# Error during parsing
statement error
from read_csv('test/sql/copy/csv/data/test/invalid_utf.csv',columns = {'col1': 'VARCHAR'}, auto_detect=false, header = 0)
----
Invalid unicode (byte sequence mismatch) detected.


statement error
from read_csv('test/sql/copy/csv/data/test/invalid_utf.csv',columns = {'col1': 'VARCHAR'}, auto_detect=false, header = 0)
----
CSV Error on Line: 3

# Test ignore errors over more complex file

# Test error in the second vector

# Test borked utf-8 within quotes

