# name: test/sql/secrets/create_secret_persistence.test
# description: Test secret persistence
# group: [secrets]

statement ok
PRAGMA enable_verification;

require httpfs

# Create some s3 secret, the normally the default is TEMPORARY
statement ok
CREATE SECRET my_tmp_secret (
	TYPE S3,
    SCOPE 's3://bucket1'
)

# Explicitly stating
statement ok
CREATE TEMPORARY SECRET my_tmp_secret_2 (
	TYPE S3,
    SCOPE 's3://bucket1'
)

# Permanent secrets are not yet supported # FIXME
statement error
CREATE PERMANENT SECRET my_tmp_secret_3 (
	TYPE S3,
    SCOPE 's3://bucket1'
)
----
Not implemented Error

query III
SELECT name, storage, scope FROM duckdb_secrets();
----
my_tmp_secret	in-memory	[s3://bucket1]
my_tmp_secret_2	in-memory	[s3://bucket1]