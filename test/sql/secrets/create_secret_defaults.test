# name: test/sql/secrets/create_secret_defaults.test
# description: Test default values during secret creation
# group: [secrets]

statement ok
PRAGMA enable_verification;

require httpfs

# Without name we use the __default_<type> name. The default config for for the S3 type is config
statement ok
CREATE SECRET (
    TYPE S3,
    KEY_ID 'my_key',
    SECRET 'my_secret'
)

query IIII
SELECT name, provider, type, scope FROM duckdb_secrets();
----
__default_s3	config	s3	[s3://]

# Without name we use the __default_<type> name. The default config for for the R2 type is config
statement ok
CREATE SECRET (
    TYPE R2,
    KEY_ID 'my_key',
    SECRET 'my_secret',
    ACCOUNT_ID 'my_account_id'
)

query IIII
SELECT name, provider, type, scope FROM duckdb_secrets() ORDER BY name;
----
__default_r2	config	r2	[r2://]
__default_s3	config	s3	[s3://]


# Without name we use the __default_<type> name. The default config for for the R2 type is config
statement ok
CREATE SECRET (
    TYPE GCS,
    KEY_ID 'my_key',
    SECRET 'my_secret'
)

query IIII
SELECT name, provider, type, scope FROM duckdb_secrets() ORDER BY name;
----
__default_gcs	config	gcs	[gcs://]
__default_r2	config	r2	[r2://]
__default_s3	config	s3	[s3://]